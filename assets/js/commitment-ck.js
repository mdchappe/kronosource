/*!

Name: Commitment
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: February 7, 2014
Last Updated: February 7, 2014
Licensed under the MIT license

*/(function(e){e.fn.commitment=function(t){if(!this.length)return this;var n={user:null,repo:null,filterBranch:null,filterAuthor:null,filterPath:null,filterSince:null,filterUntil:null,makeCommitLink:!1,showCommitDate:!0,dateFormat:null,showCommitter:!0,showCommitterAvatar:!1,error:function(e){},success:function(){},limit:1},r=this;r.settings={};r.settings=e.extend({},n,t);var i=r.settings,s=e(this);if(i.user&&i.repo){var o="https://api.github.com/repos/"+i.user+"/"+i.repo+"/commits",u=[];i.filterBranch&&u.push("sha="+i.filterBranch);i.filterAuthor&&u.push("author="+i.filterAuthor);i.filterPath&&u.push("path="+i.filterPath);i.filterSince&&u.push("since="+i.filterSince);i.filterUntil&&u.push("until="+i.filterUntil);u="?"+u.join("&");u.length>1&&(o+=u);s.each(function(){e.ajax({type:"GET",url:o,dataType:"json",success:function(e){var t=e.length;i.limit&&(t=i.limit);for(var n=0;n<t;n++){var r="<li>";i.makeCommitLink&&e[n].html_url?r+='<a href="'+e[n].html_url+'" target="_blank" class="message">'+e[n].commit.message+"</a>":r+='<span class="message">'+e[n].commit.message+"</span>";if(i.showCommitDate&&e[n].commit.committer.date){var o=new Date(e[n].commit.committer.date),u=o.getDate(),a=o.getMonth(),f=o.getFullYear();i.dateFormat==="dd/mm/yyyy"?o=u+"/"+a+"/"+f:o=o.toDateString();r+='<span class="date">'+o+"</span>"}if(i.showCommitter&&e[n].committer.login){r+=' <span class="committer">';i.showCommitterAvatar&&e[n].committer.avatar_url&&(r+='<img src="'+e[n].committer.avatar_url+'" alt="Github Avatar" class="avatar" />');r+='<span class="user">By <span>'+e[n].committer.login+"</span></span></span>"}r+="</li>";s.append(r)}i.success.call(this)},error:function(e,t,n){i.error.call(this,"Status: "+e.status+" Error: "+n)}})})}else i.error.call(this,"A Github username and repository are required.")}})(jQuery);